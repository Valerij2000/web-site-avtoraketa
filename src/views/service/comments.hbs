<section class="section-comments" id="section-comments">
  <h2 class="visually-hidden">–°–µ–∫—Ü–∏—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏</h2>
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-md-12">
        <div id="anycomment-app" class="comments">

          <form id="comment-form" class="comment-form">
            <input type="text" id="comment-author" placeholder="–í–∞—à–µ –∏–º—è" required />
            <textarea id="comment-text" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." required></textarea>
            <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
          </form>

          <ul id="comments-list" class="comments-list"></ul>

        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .comment-form textarea {
    resize: none;
  }

  .comment-form input,
  .comment-form textarea {
    border: 1px solid white;
    background: none;
    color: white;
    padding: 10px;
    font-size: 14px;
  }

  .comment-item {
    padding: 12px;
    border: 1px solid #ddd;
    margin-bottom: 12px;
    position: relative;
    background: #fafafa;
  }

  .comment-header {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: #666;
    margin-bottom: 6px;
  }

  .comment-author {
    font-weight: 600;
    color: #fff;
  }

  .comment-delete {
    position: absolute;
    bottom: 8px;
    right: 8px;
    background: transparent;
    border: none;
    color: red;
    cursor: pointer;
  }

  .comment-item p {
    margin: 0;
    line-height: 1.4;
  }

  .section-comments {
    padding: 40px 0;
  }

  .comment-form {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 20px;
  }

  .comment-form textarea {
    resize: vertical;
    min-height: 80px;
    padding: 10px;
    font-size: 14px;
  }

  .comment-form button {
    align-self: flex-start;
    padding: 8px 16px;
    cursor: pointer;
  }

  .comments-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .comment-item {
    background-color: black;
    padding: 10px;
    border: 1px solid #ddd;
    margin-bottom: 10px;
    position: relative;
  }

  .comment-item button {
    position: absolute;
    bottom: 8px;
    right: 8px;
    background: transparent;
    border: none;
    color: red;
    cursor: pointer;
  }
</style>

<script>
  const form = document.getElementById('comment-form');
  const authorInput = document.getElementById('comment-author');
  const textInput = document.getElementById('comment-text');
  const list = document.getElementById('comments-list');

  const STORAGE_KEY = 'comments';

  const defaultComments = [
    {
      author: '–ê–ª–µ–∫—Å–µ–π',
      text: 'üî• –û—á–µ–Ω—å –∫—Ä—É—Ç–æ–π –ø—Ä–æ–µ–∫—Ç, –≤—ã–≥–ª—è–¥–∏—Ç —Å—Ç–∏–ª—å–Ω–æ!',
      date: '28.01.2026 11:42',
      isSystem: true,
    },
    {
      author: '–ú–∞—Ä–∏—è',
      text: 'üëè –û—Ç–ª–∏—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–∞—Å—å —Å–µ–∫—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.',
      date: '29.01.2026 09:18',
      isSystem: true,
    },
    {
      author: '–ò–≤–∞–Ω',
      text: 'üí° –ë—ã–ª–æ –±—ã –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.',
      date: '30.01.2026 16:05',
      isSystem: true,
    },
  ];

  function getComments() {
    return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
  }

  function saveComments(comments) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(comments));
  }

  function initComments() {
    if (!localStorage.getItem(STORAGE_KEY)) {
      saveComments(defaultComments);
    }
  }

  function formatDate(date = new Date()) {
    return date.toLocaleString('ru-RU', {
      day: '2-digit',
      month: '2-digit',
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit',
    });
  }

  function renderComments() {
    const comments = getComments();
    list.innerHTML = '';

    comments.forEach((comment, index) => {
      const li = document.createElement('li');
      li.className = 'comment-item';

      li.innerHTML = `
        <div class="comment-header">
          <span class="comment-author">${comment.author}</span>
          <span class="comment-date">${comment.date}</span>
        </div>
        <p>${comment.text}</p>
        ${comment.isSystem
          ? ''
          : `<button class="comment-delete" data-index="${index}">–£–¥–∞–ª–∏—Ç—å</button>`
        }
      `;

      list.appendChild(li);
    });
  }

  form.addEventListener('submit', (e) => {
    e.preventDefault();

    const author = authorInput.value.trim();
    const text = textInput.value.trim();

    if (!author || !text) return;

    const comments = getComments();

    comments.push({
      author,
      text,
      date: formatDate(),
      isSystem: false,
    });

    saveComments(comments);

    authorInput.value = '';
    textInput.value = '';

    renderComments();
  });

  list.addEventListener('click', (e) => {
    if (e.target.classList.contains('comment-delete')) {
      const index = e.target.dataset.index;
      const comments = getComments();

      comments.splice(index, 1);
      saveComments(comments);
      renderComments();
    }
  });

  initComments();
  renderComments();
</script>